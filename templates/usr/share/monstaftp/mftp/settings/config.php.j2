<?php
    // Generated by ansible

    // Before changing these variables please view the README at
    // http://redirect.monstaftp.com/readme
    // Further settings are available in "settings.json"

    // GENERAL VARIABLES //

    $configPathSettings = dirname(__FILE__) . "/{{ monstaftp_configPathSettings }}";
    $configTimeZone = "{{ monstaftp_configTimeZone }}";
    $configTempDir = "{{ monstaftp_configTempDir }}";
    $configMaxFileSize = "{{ monstaftp_configMaxFileSize }}";
    $configChunkUploadSize = "{{ monstaftp_configChunkUploadSize }}";
    $configMaxExecutionTimeSeconds = {{ monstaftp_configMaxExecutionTimeSeconds }};
    $configSSHAgentAuthEnabled = {{ monstaftp_configSSHAgentAuthEnabled }};
    $configSSHKeyAuthEnabled = {{ monstaftp_configSSHKeyAuthEnabled }};
    $configPageTitle = "{{ monstaftp_configPageTitle }}";

    $configMaxLoginFailures = {{ monstaftp_configMaxLoginFailures }};
    $configLoginFailuresResetTimeMinutes = {{ monstaftp_configLoginFailuresResetTimeMinutes }};

    $configMftpActionLogPath = {{ monstaftp_configMftpActionLogPath }};
    $configMftpActionLogFunction = {{ monstaftp_configMftpActionLogFunction }};

    $configLogToSyslog = {{ monstaftp_configLogToSyslog }};
    $configMftpSyslogFacility = {{ monstaftp_configMftpSyslogFacility }};

    $configLogToFile = {{ monstaftp_configLogToFile }};
    $configMftpLogFilePath = {{ monstaftp_configMftpLogFilePath }};
    $configMftpLogLevelThreshold = {{ monstaftp_configMftpLogLevelThreshold }};
    $configDisableLatestVersionCheck = {{ monstaftp_configDisableLatestVersionCheck }};

    // DEFINE THE VARIABLES //

    define("APPLICATION_SETTINGS_PATH", $configPathSettings);
    define("MONSTA_TEMP_DIRECTORY", $configTempDir);
    define("SSH_AGENT_AUTH_ENABLED", $configSSHAgentAuthEnabled);
    define("SSH_KEY_AUTH_ENABLED", $configSSHKeyAuthEnabled);
    define("MFTP_PAGE_TITLE", $configPageTitle);
    define("MFTP_MAX_LOGIN_FAILURES", $configMaxLoginFailures);
    define("MFTP_LOGIN_FAILURES_RESET_TIME_MINUTES", $configLoginFailuresResetTimeMinutes);

    define("MFTP_ACTION_LOG_PATH", $configMftpActionLogPath);
    define("MFTP_ACTION_LOG_FUNCTION", $configMftpActionLogFunction);

    define("MFTP_LOG_TO_SYSLOG", $configLogToSyslog);
    define("MFTP_LOG_SYSLOG_FACILITY", $configMftpSyslogFacility);

    define("MFTP_LOG_TO_FILE", $configLogToFile);
    define("MFTP_LOG_FILE_PATH", $configMftpLogFilePath);
    define("MFTP_LOG_LEVEL_THRESHOLD", $configMftpLogLevelThreshold);

    define("MFTP_DISABLE_LATEST_VERSION_CHECK", $configDisableLatestVersionCheck);

    date_default_timezone_set($configTimeZone);

    $currentMemoryLimitFormatted = ini_get('memory_limit');
    $currentMemoryLimit = formattedSizeToBytes($currentMemoryLimitFormatted);

    $maxUploadSizeBytes = formattedSizeToBytes($configMaxFileSize);

    if ($currentMemoryLimit != -1) {
        if ($maxUploadSizeBytes > $currentMemoryLimit)
            ini_set('memory_limit', $configMaxFileSize);
    }

    define("MFTP_MAX_UPLOAD_SIZE", $maxUploadSizeBytes);

    define("MFTP_CHUNK_UPLOAD_SIZE", $configChunkUploadSize);

    ini_set('max_execution_time', $configMaxExecutionTimeSeconds);

    $proConfigurationPath = dirname(__FILE__) . "/../license/config_pro.php";

    if(file_exists($proConfigurationPath))
        require_once($proConfigurationPath);
    else {
        define("AUTHENTICATION_FILE_PATH", "");
        define("MONSTA_LICENSE_PATH", "");
    }

    define("MONSTA_UPLOAD_LOGGING", false);
